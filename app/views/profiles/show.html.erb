<section data-controller="picture-preview">
  <%= form_with model: @user, url: profile_path(@user), method: :patch, html: {class: "flex flex-col items-center justify-center sm:flex-row sm:items-start sm:justify-start gap-2" }  do |form|  %>
    <h1 class="order-1 sm:order-2 text-center sm:text-left w-full prose lg:prose-x dark:prose-invert text-2xl text-green-950 underline underline-offset-2"><%= @user.email %></h1>
    <label for="user_picture" class="order-2 sm:order-1 hover:cursor-pointer hover:brightness-75  transition-all duration-300 relative w-28 aspect-square">
      <div class="absolute inset-0 flex justify-center items-center opacity-0 hover:opacity-100 transition-opacity duration-300">
        <span class="text-white text-sm rounded bg-gray-700 p-1">Change</span>
      </div>
      <%= image_tag @user.picture.attached? ? @user.picture : "user_placeholder", data: { picture_preview_target: "preview" }, class: "object-cover rounded-full overflow-hidden"  %>
    </label>
    <%= form.file_field :picture, class: "hidden order-3", data: { picture_preview_target: "input" },  required: true %>
  <% end %>
</section>
